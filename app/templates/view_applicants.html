<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Applicants - {{ internship.title }}</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 900px; margin: 20px auto; padding: 20px; }
        h2 { text-align: center; margin-bottom: 30px; }
        .applicant { border: 1px solid #ddd; padding: 15px; margin-bottom: 15px; border-radius: 5px; background: #f9f9f9; }
        .applicant h3 { margin: 0 0 10px 0; color: #333; }
        .info { margin: 5px 0; color: #555; }
        .quiz-result { padding: 10px; border-radius: 4px; margin-top: 10px; font-weight: bold; }
        .passed { background: #d4edda; color: #155724; }
        .failed { background: #f8d7da; color: #721c24; }
        .back-link { display: inline-block; margin-top: 20px; text-decoration: none; color: #4CAF50; font-weight: bold; }
        .back-link:hover { text-decoration: underline; }
        .no-applicants { text-align: center; padding: 40px; color: #999; }
    </style>
</head>
<body>
    <h2>Applicants for: {{ internship.title }}</h2>

    {% if applications %}
        {% for app in applications %}
            <div class="applicant">
                <h3>{{ app.student.full_name }}</h3>
                <p class="info"><strong>Department:</strong> {{ app.student.department or "N/A" }}</p>
                <p class="info"><strong>Skills:</strong> {{ app.student.skills|join(', ') if app.student.skills else "None listed" }}</p>
                <p class="info"><strong>Applied on:</strong> {{ app.applied_at.strftime('%Y-%m-%d %H:%M') }}</p>
                
                {% if app.quiz_passed %}
                    <div class="quiz-result passed">
                        ✅ Quiz Passed - Score: {{ app.quiz_score }}%
                    </div>
                {% else %}
                    <div class="quiz-result failed">
                        ❌ Quiz Failed - Score: {{ app.quiz_score }}%
                    </div>
                {% endif %}
            </div>
        {% endfor %}
    {% else %}
        <div class="no-applicants">
            <p>No applications received yet.</p>
        </div>
    {% endif %}

    <a class="back-link" href="{{ url_for('main.employer_dashboard') }}">← Back to Dashboard</a>
</body>
</html>